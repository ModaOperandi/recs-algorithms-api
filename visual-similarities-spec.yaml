idl_version: 0               # meta information
service_name: recs-algorithms-api
version: '1'

operations:
  visual_similarities:
    get_similarities_for_subcategory:
      description: query the approximate nearest node index for neighbors
      endpoint: POST /ann/{index:string}/query
      body: SimilaritiesPayload
      response:
        ok: json[]
models:
  SimilaritiesPayload:
    id:
      type: string
      description: variant id input for visual similarities
    k:
      type: int
      description: number of returned recommendations
    thresh_score:
      type: double
      description: if given, recommendations with score greather than threshold will be returned
    search_k:
      type: int
      description: always use -1


idl_version: 0
service_name: visual-similarities-api
version: '1'

operations:
  visual_similarities:
    get_visual_similarities:
      description: query the approximate nearest node index for neighbors
      endpoint: POST /ann/{index:string}/query
      body: SimilaritiesPayload
      response:
        ok: SimilaritiesResponse
models:
  SimilaritiesPayload:
    id:
      type: string
      description: variant id input for visual similarities
    k:
      type: int
      description: number of returned recommendations
    thresh_score:
      type: float
      description: if given, recommendations with score greather than threshold will be returned
    search_k:
      type: int
      description: always use -1
  SimilaritiesResponse:
    recs: Recommendations[]
  Recommendations:
    vid: string
    score: float?
